<%= content_for :title, "Treinos Prescritos - #{current_personal.name}" %>

<div class="w-full min-h-screen bg-[#030a08] flex flex-col items-center p-0 overflow-x-hidden">
  <!-- Top Navigation -->
  <div class="w-full max-w-[428px] h-[70px] bg-[#1c8394] rounded-bl-[30px] rounded-br-[30px] relative mb-4">
    <div class="absolute inset-0 bg-[#1c8394] opacity-20 rounded-bl-[30px] rounded-br-[30px]"></div>
    <div class="absolute inset-0 flex items-center justify-between px-4">
      <%= link_to 'javascript:history.back()', class: "w-8 h-8 bg-[#0e0e0e]/10 rounded-full border backdrop-blur-sm flex items-center justify-center" do %>
        <i class="fa fa-arrow-left text-white text-sm"></i>
      <% end %>
      <div class="flex-1 text-center">
        <div class="text-white text-base font-semibold">Treinos Prescritos</div>
      </div>
    </div>
  </div>

  <!-- UM ÚNICO CONTAINER COM O CONTROLLER -->
  <div
    class="w-full max-w-[428px] px-4 mb-6"
    data-controller="auto-filter"
    data-auto-filter-personal-id="<%= current_personal.id %>"
  >
    <!-- Campo de busca -->
    <input
      data-auto-filter-target="input"
      data-action="input->auto-filter#onInput"
      type="text"
      placeholder="Buscar por nome ou protocolo..."
      class="w-full h-10 px-4 rounded-full bg-[#202020] text-white focus:outline-none placeholder-gray-400"
    />

    <!-- Dropdown -->
    <ul
      data-auto-filter-target="dropdown"
      class="absolute w-full bg-[#151515] rounded-lg shadow-lg mt-2 max-h-48 overflow-y-auto hidden"
    >
    </ul>

    <!-- Botão Criar Novo Treino -->
    <div class="w-full max-w-[428px] mt-4 mb-4">
      <%= link_to "Novo Treino", new_for_personal_workout_protocols_path,
                  class: "bg-[#a52502] text-white font-semibold px-6 py-3 rounded-full text-center block mx-auto w-max" %>
    </div>

    <!-- Lista de Protocolos -->
    <div
      data-auto-filter-target="listContainer"
    >
      <%= render partial: 'protocols_list', locals: { workout_protocols: @workout_protocols } %>
    </div>
  </div>
</div>
