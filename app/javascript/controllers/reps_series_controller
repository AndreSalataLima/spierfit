import { Controller } from "@hotwired/stimulus";

export default class extends Controller {
  static targets = ["reps", "sets"];
  static values = {
    exerciseSetId: Number
  }

  connect() {
    console.log("RepsSeriesController connected");
    this.updateRepsAndSets();
    this.timer = setInterval(() => {
      this.updateRepsAndSets();
    }, 1000); // Atualiza a cada 1 segundo
  }


  disconnect() {
    clearInterval(this.timer); // Para o timer quando o controller Ã© desconectado
  }

  updateRepsAndSets() {
    fetch(`/exercise_sets/${this.exerciseSetIdValue}/reps_and_sets`)
      .then(response => response.json())
      .then(data => {
        this.repsTarget.textContent = data.reps;
        this.setsTarget.textContent = data.sets;
      })
      .catch(error => console.error('Error fetching reps and sets:', error));
  }
}
